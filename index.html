<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>موقع حجز تذاكر القطار</title>
  <style>
    /* General Styles */
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      background-color: #f4f4f4;
      color: #333;
    }

    header {
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 1rem 0;
    }

    main {
      padding: 2rem;
    }

    section {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }

    h2 {
      color: #333;
      margin-bottom: 1rem;
    }

    /* Form Styles */
    form {
      display: flex;
      flex-direction: column;
    }

    label {
      margin-bottom: 0.5rem;
    }

    input,
    select {
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ddd;
      border-radius: 3px;
    }

    button {
      background-color: #5cb85c;
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 3px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #4cae4c;
    }

    /* Seat Selection (Placeholder) */
    .seat-selection {
      background-color: #eee;
      padding: 1rem;
      border-radius: 3px;
      text-align: center;
      margin-bottom: 1rem;
    }

    /* Login & Register Styles */
    .auth-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 2rem;
    }

    .auth-buttons button {
      width: 45%;
    }

    /* Payment Section */
    .payment-section {
      background-color: #fff;
      padding: 2rem;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .payment-method {
      margin-bottom: 1.5rem;
      border: 1px solid #ddd;
      padding: 1rem;
      border-radius: 5px;
    }

    .payment-method input[type="radio"] {
      display: none;
    }

    .payment-method label {
      display: block;
      cursor: pointer;
      padding: 0.5rem 1rem;
    }

    .payment-method input[type="radio"]:checked+label {
      background-color: #e9ecef;
    }

    .card-details {
      display: none;
      margin-top: 1rem;
    }

    .card-details input[type="text"] {
      width: 100%;
      margin-bottom: 0.5rem;
    }

    /* Show card details when credit card option is selected */
    #credit-card:checked~.card-details {
      display: block;
    }

    /* Payment Button */
    #payment-form button {
      background-color: #007bff;
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 3px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #payment-form button:hover {
        background-color: #0069d9;
      }
  
      /* General Styles -  تطبيق على  كلتا الصفحتين */
      .body {
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
      }
  
      .container {
        background-color: #fff;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        padding: 40px;
        width: 350px;
        max-width: 90%;
        text-align: center;
      }
  
      h2 {
        color: #333;
        margin-bottom: 20px;
      }
  
      input {
        width: 100%;
        padding: 15px;
        margin: 5px 0 20px 0;
        border-radius: 4px;
        border: 1px solid #ddd;
      }
  
      input:focus {
        outline: none;
        border-color: #5cb85c;
      }
  
      button {
        background-color: #5cb85c;
        color: white;
        padding: 15px 20px;
        border: none;
        cursor: pointer;
        width: 100%;
        opacity: 0.9;
        border-radius: 4px;
        transition: background-color 0.3s ease;
      }
  
      button:hover {
        opacity: 1;
        background-color: #4cae4c;
      }
  
      a {
        color: #5cb85c;
        text-decoration: none;
      }
  
      a:hover {
        text-decoration: underline;
      }
  
      /*  Error Messages (يمكن  إضافتها  عند  التحقق  من  صحة  البيانات) */
      .error {
        color: red;
        margin-bottom: 10px;
      }
  
      /*css الخاص ب لبمقاعد */
      .train-layout {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 20px;
      }
  
      .carriage {
        display: flex;
        margin-bottom: 10px;
      }
  
      .seat {
        width: 30px;
        height: 30px;
        background-color: #ccc;
        border: 1px solid #999;
        margin: 5px;
        cursor: pointer;
        text-align: center;
        line-height: 30px;
      }
  
      .seat.selected {
        background-color: #5cb85c;
        color: white;
      }
    </style>
  </head>
  
  <body>
  
    <header>
      <h1>موقع حجز تذاكر القطار</h1>
    </header>
  
    <main>
      <section class="booking-section">
        <h2>حجز التذاكر</h2>
  
        <form id="booking-form">
  
          <div>
            <label for="train">رقم القطار:</label>
            <select id="train" required>
              <option value="">اختر القطار</option>
              <option value="123">قطار 123</option>
              <option value="456">قطار 456</option>
  
            </select>
          </div>
  
          <div>
            <label for="class">درجة السفر:</label>
            <select id="class" required>
              <option value="">اختر الدرجة</option>
              <option value="economy">اقتصادية</option>
              <option value="business">رجال الأعمال</option>
            </select>
          </div>
  
          <div>
            <label for="passengers">عدد المسافرين:</label>
            <input type="number" id="passengers" min="1" value="1" required>
        </div>

        <div class="seat-selection">
          <h3>اختيار المقاعد </h3>
        </div>

        <button type="submit">حجز</button>
      </form>

      <!--  أزرار تسجيل الدخول و إنشاء حساب  -->
      <div class="auth-buttons">
        <button onclick="showLogin()">تسجيل الدخول</button>
        <button onclick="showRegister()">إنشاء حساب</button>
      </div>
    </section>

    <!--  صفحة تسجيل الدخول  -->
    <section class="login-section container" id="loginSection" style="display: none;">
      <h2>تسجيل الدخول</h2>
      <form id="login-form">
        <div>

          <label for="email">البريد الإلكتروني:</label>
          <input type="email" id="email" required>
        </div>
        <div>
          <label for="password">كلمة المرور:</label>
          <input type="password" id="password" required>
        </div>
        <button type="submit">دخول</button>
      </form>
      <p>ليس لديك حساب؟ <a href="#" onclick="showRegister()">أنشئ حسابًا الآن</a></p>
    </section>

    <!--  صفحة إنشاء حساب جديد  -->
    <section class="register-section container" id="registerSection" style="display: none;">
      <h2>إنشاء حساب جديد</h2>
      <form id="register-form">
        <div>
          <label for="name">الاسم الكامل:</label>
          <input type="text" id="name" required>
        </div>
        <div>
          <label for="email">البريد الإلكتروني:</label>
          <input type="email" id="email" required>
        </div>
        <div>
          <label for="password">كلمة المرور:</label>
          <input type="password" id="password" required>
        </div>
        <div>
          <label for="confirm-password">تأكيد كلمة المرور:</label>
          <input type="password" id="confirm-password" required>
        </div>
        <button type="submit">إنشاء حساب</button>
      </form>
      <p>لديك حساب بالفعل؟ <a href="#" onclick="showLogin()">سجل دخولك</a></p>
    </section>

    <!--  طرق الدفع   -->
    <section class="payment-section" id="paymentSection" style="display: none;">
      <h2>اختيار طريقة الدفع</h2>

      <form id="payment-form">
        <div class="payment-method">
          <input type="radio" id="credit-card" name="payment" value="credit-card" checked>
          <label for="credit-card">بطاقة الائتمان</label>
          <div class="card-details">
            <input type="text" placeholder="رقم البطاقة" required>
            <input type="text" placeholder="اسم صاحب البطاقة" required>
            <input type="text" placeholder="تاريخ الانتهاء (MM/YY)" required>
            <input type="text" placeholder="CVV" required>
          </div>
        </div>

        <div class="payment-method">
          <input type="radio" id="paypal" name="payment" value="paypal">
          <label for="paypal">PayPal</label>
        </div>

        <div class="payment-method">
          <input type="radio" id="mada" name="payment" value="mada">
          <label for="mada">مدى</label>
        </div>

        <button type="submit">دفع الآن</button>
      </form>
    </section>

  </main>

  <footer>
    <p>&copy; 2023 جميع الحقوق محفوظة</p>
  </footer>

  <script>
    //  قاعدة  البيانات  المؤقتة  (مصفوفات  JavaScript)  
   // const train = trains.find(train => train.id === parseInt(selectedTrainId));
 
   const trains = [
      {
        id: 123,
        route: "الاسكندريه-القاهره",
        time: "08:00 - 11:00",
        type: "مكيف",
        seats: { economy: 50, business: 20 }
      },
      {
        id: 456,
        route: "القاهره-اسوان",
        time: "10:00 - 20:00",
        type: "VIP",
        seats: { economy: 40, business: 10 }
      }
    ];
    function  handleTrainSelection(selectedTrainId)  {
        const  train  =  trains.find(train  =>  train.id  ===  parseInt(selectedTrainId))};


    const users = []; //  مصفوفة   لتخزين   بيانات   المستخدمين 

   

    //  JavaScript   لرسم   تخطيط   القطار   و   اختيار   المقاعد 
   // const trainLayout = document.getElementById('trainLayout');
     //  مصفوفة   لتخزين   أرقام   المقاعد   المُختارة 
     
    function generateTrainLayout(trainId, travelClass) {
      const train = trains.find(train => train.id == trainId);
      const seatsPerCarriage = 10; //  عدد  المقاعد  في  كل  عربة  
      const numCarriages = Math.ceil(train.seats[travelClass] / seatsPerCarriage); //  عدد  العربات  
      const  trainLayout  =  document.getElementById('trainLayout'); 
      generateTrainLayout(numCarriages,  seatsPerCarriage);
      let selectedSeats = [];
      trainLayout.innerHTML = ''; //  مسح   تخطيط   القطار   السابق  

      for (let i = 0; i < numCarriages; i++) {
        const carriage = document.createElement('div');
        carriage.classList.add('carriage');

        for (let j = 1; j <= seatsPerCarriage; j++) {
          const seatNumber = i * seatsPerCarriage + j; //  حساب   رقم   المقعد   في   القطار  
          if (seatNumber > train.seats[travelClass]) break; //  التوقف   إذا   تجاوز   عدد   المقاعد   المتاحة  

          const seat = document.createElement('div');
          seat.classList.add('seat');
          seat.textContent = seatNumber;

          //  التعامل   مع   حدث   النقر   على   المقعد  
          seat.addEventListener('click', () => {
            if (seat.classList.contains('selected')) {
              //  إلغاء   تحديد   المقعد  
              seat.classList.remove('selected');
              const index = selectedSeats.indexOf(seatNumber);
              if (index > -1) {
                selectedSeats.splice(index, 1);
              }
            } else if (selectedSeats.length < passengersInput.value) { //  التحقق   من   عدد   المسافرين  
              //  تحديد   المقعد  
              seat.classList.add('selected');
              selectedSeats.push(seatNumber);
            } else {
              alert('لقد    اخترت    الحد    الأقصى    من    المقاعد    المسموح    به.');
            }

            console.log("المقاعد المختارة:", selectedSeats);
          });

          carriage.appendChild(seat);
        }

        trainLayout.appendChild(carriage);
      }
    }

    //  استدعاء  generateTrainLayout  عند  تغيير  القطار  أو  درجة  السفر 
    trainSelect.addEventListener('change', () => {
      const selectedTrainId = parseInt(trainSelect.value);
      const selectedClass = classSelect.value;
      selectedSeats = []; //  مسح   المق

      generateTrainLayout(selectedTrainId, selectedClass);
    });

    classSelect.addEventListener('change', () => {
      const selectedTrainId = parseInt(trainSelect.value);
      const selectedClass = classSelect.value;
      selectedSeats = []; //  مسح   المقاعد   المُختارة   عند   تغيير   الدرجة 
      generateTrainLayout(selectedTrainId, selectedClass);
    });

    //  JavaScript   لرسم   تخطيط   القطار   و   اختيار   المقاعد  
    const trainLayout = document.getElementById('trainLayout');
    const selectedSeats = []; //  مصفوفة   لتخزين   أرقام   المقاعد   المُختارة 

    function generateTrainLayout(numCarriages, seatsPerCarriage) {
      for (let i = 0; i < numCarriages; i++) {
        const carriage = document.createElement('div');
        carriage.classList.add('carriage');

        for (let j = 1;
        j <= seatsPerCarriage; j++) {
            const seat = document.createElement('div');
            seat.classList.add('seat');
            seat.textContent = j;
  
            //  التعامل   مع   حدث   النقر   على   المقعد  
            seat.addEventListener('click', () => {
              const seatNumber = i * seatsPerCarriage + j; //  حساب   رقم   المقعد   في   القطار 
  
              if (seat.classList.contains('selected')) {
                //  إلغاء   تحديد   المقعد  
                seat.classList.remove('selected');
                const index = selectedSeats.indexOf(seatNumber);
                if (index > -1) {
                  selectedSeats.splice(index, 1);
                }
              } else {
                //  تحديد   المقعد  
                seat.classList.add('selected');
                selectedSeats.push(seatNumber);
              }
  
              console.log("المقاعد المختارة:", selectedSeats); //  عرض   المقاعد   المُختارة   في   وحدة   التح
  
            });
  
            carriage.appendChild(seat);
          }
  
          trainLayout.appendChild(carriage);
        }
      }
  
      //  إنشاء  تخطيط  افتراضي  للقطار  عند  تحميل  الصفحة  
      generateTrainLayout(2, 10); //  2  عربات،  10  مقاعد  لكل  عربة 
      //*********************************************************************
      // JavaScript for Booking Form 
      document.getElementById('booking-form').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent form submission
  
        // Get form values
        var train = document.getElementById('train').value;
        var travelClass = document.getElementById('class').value;
        var passengers = document.getElementById('passengers').value;
  
        // Validation (add more as needed)
        if (train === '' || travelClass === '' || passengers === '') {
          alert('يرجى ملء جميع الحقول.');
          return;
        }
        // إظهار   قسم   طرق   الدفع  
        document.getElementById('paymentSection').style.display = 'block';
        document.getElementById('booking-form').style.display = 'none'; // إخفاء  قسم  حجز  التذاكر 
  
        // Here you would typically:
        // 1. Send the booking data to your server-side code
        // 2. Handle the response (e.g., display confirmation, errors)
  
        // For this example, we'll just show an alert
        alert('تم إرسال حجزك بنجاح!');
  
        // After successful booking, you might want to:
        // - Clear the form
        // - Redirect to a confirmation page
        // - Update UI elements as needed
      });
  
      // JavaScript for Login/Register Toggle
      function showLogin() {
        document.getElementById('loginSection').style.display = 'block';
        document.getElementById('registerSection').style.display = 'none';
        document.getElementById('paymentSection').style.display = 'none';
        document.getElementById('booking-form').style.display = 'none'; // إخفاء  قسم  حجز  التذاكر 
      }
  
      function showRegister() {
        document.getElementById('registerSection').style.display = 'block';
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('paymentSection').style.display = 'none';
        document.getElementById('booking-form').style.display = 'none'; // إخفاء  قسم  حجز  التذاكر 
      }
  
      //  JavaScript   لتغيير   عرض   طرق  الدفع  
      const paymentForm = document.getElementById('payment-form');
        const paymentMethods = document.querySelectorAll('.payment-method input[type="radio"]');
        const cardDetails = document.querySelector('.card-details');
  
        function toggleCardDetails() {
          if (document.getElementById('credit-card').checked) {
            cardDetails.style.display = 'block';
          } else {
            cardDetails.style.display = 'none';
          }
        }
  
        paymentMethods.forEach(method => {
          method.addEventListener('change', toggleCardDetails);
        });
  
        paymentForm.addEventListener('submit', (event) => {
          event.preventDefault();
          let selectedMethod = '';
          paymentMethods.forEach
          (method => {
            if (method.checked) {
              selectedMethod = method.value;
            }
          });
          console.log('تم اختيار طريقة الدفع:', selectedMethod);
        });
        toggleCardDetails();
  
  
        //  Placeholder Data (سيتم استبداله بقاعدة بيانات)
      //  const train = trains.find(train => train.id === parseInt(selectedTrainId));
        //const trains = [ 
          //{ id: 123, route: "الاسكندريه-القاهره", seats: { economy: 50, business: 20 } },
          //{ id: 456, route: "القاهره-اسوان", seats: { economy: 40, business: 10 } }
        //];
  
        // Get Form Elements
        const trainSelect = document.getElementById('train');
        const classSelect = document.getElementById('class');
        const passengersInput = document.getElementById('passengers');
        const seatSelection = document.querySelector('.seat-selection');
  
        // Function to populate train select options
        function populateTrains() {
          trains.forEach(train => {
            const option = document.createElement('option');
            option.value = train.id;
            option.text = `قطار ${train.id} (${train.route})`;
            trainSelect.add(option);
          });
        }
  
        // Function to display available seats
        function displayAvailableSeats(trainId, travelClass) {
          const train = trains.find(train => train.id === trainId);
          if (train) {
            const availableSeats = train.seats[travelClass];
            seatSelection.innerHTML = `<h3>متاح ${availableSeats} مقعد في درجة ${travelClass}</h3>`;
          } else {
            seatSelection.innerHTML = '<h3>اختر قطار ودرجة أولاً</h3>';
          }
        }
  
        // Initialize
        populateTrains();
        /******************************************************************/
  
        // JavaScript for Trip Details Modal
        const tripDetailsModal = document.getElementById("tripDetailsModal");
        const tripDetailsContent = document.getElementById("tripDetailsContent");
  
        function showTripDetails() {
          const selectedTrainId = trainSelect.value;
          const train = trains.find(train => train.id == selectedTrainId);
  
          if (train) {
            tripDetailsContent.innerHTML = `
            <b>الخط:</b> ${train.route}<br>
            <b>الوقت:</b> ${train.time}<br>
            <b>النوع:</b> ${train.type}
          `;
            tripDetailsModal.style.display = "block";
          }
        }
  
        function closeModal() {
          tripDetailsModal.style.display = "none";
        }
  
        //  login.html JavaScript
        const loginForm = document.getElementById('login-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
  
        loginForm.addEventListener('submit', (event) => {
          event.preventDefault();
  
          const email = emailInput.value;
          const password = passwordInput.value;
  
          if (email === 'user@example.com' && password === 'password') {
            window.location.href = 'index.html';
          } else {
            alert('البريد   الإلكتروني    أو    كلمة    المرور    غير    صحيحة.');
          }
        });
  
        //  register.html JavaScript
        const registerForm = document.getElementById('register-form');
        const nameInput = document.getElementById('name');
        const registerEmailInput = document.getElementById('email');
        const registerPasswordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirm-password');
  
        registerForm.addEventListener('submit', (event) => {
          event.preventDefault();
          const name = nameInput.value;
          const email = registerEmailInput.value;
          const password = registerPasswordInput.value;
          const confirmPassword = confirmPasswordInput.value;
  
          if (password === confirmPassword) {
            alert('تم    إنشاء    الحساب    بنجاح!');
            showLogin(); //  إظهار    صفحة    تسجيل    الدخول    بعد    إنشاء    الحساب 
          } else {
            alert('كلمتا    المرور    غير    متطابقتين.');
          }
        });
    </script>
  
  </body>
  
  </html>